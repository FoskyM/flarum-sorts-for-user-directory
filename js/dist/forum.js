(()=>{var r={n:o=>{var e=o&&o.__esModule?()=>o.default:()=>o;return r.d(e,{a:e}),e},d:(o,e)=>{for(var t in e)r.o(e,t)&&!r.o(o,t)&&Object.defineProperty(o,t,{enumerable:!0,get:e[t]})},o:(r,o)=>Object.prototype.hasOwnProperty.call(r,o)};(()=>{"use strict";const o=flarum.core.compat["common/app"];var e=r.n(o);e().initializers.add("foskym/flarum-sorts-for-user-directory",(function(){console.log("[foskym/flarum-sorts-for-user-directory] Hello, forum and admin!")}));const t=flarum.core.compat["forum/app"];var n=r.n(t);const s=flarum.core.compat["common/extend"],a=flarum.core.compat["forum/components/UserCard"];var i=r.n(a);const c=flarum.core.compat["common/helpers/icon"];var u=r.n(c);function y(r,o){var e="undefined"!=typeof Symbol&&r[Symbol.iterator]||r["@@iterator"];if(e)return(e=e.call(r)).next.bind(e);if(Array.isArray(r)||(e=function(r,o){if(r){if("string"==typeof r)return l(r,o);var e={}.toString.call(r).slice(8,-1);return"Object"===e&&r.constructor&&(e=r.constructor.name),"Map"===e||"Set"===e?Array.from(r):"Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e)?l(r,o):void 0}}(r))||o&&r&&"number"==typeof r.length){e&&(r=e);var t=0;return function(){return t>=r.length?{done:!0}:{done:!1,value:r[t++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function l(r,o){(null==o||o>r.length)&&(o=r.length);for(var e=0,t=Array(o);e<o;e++)t[e]=r[e];return t}n().initializers.add("foskym/flarum-sorts-for-user-directory",(function(){if((0,s.extend)(i().prototype,"infoItems",(function(r){var o=this.attrs.user;o&&n().forum.attribute("foskym-sorts-for-user-directory.sort_by_monthly_posts")&&(r.add("monthly-discussion-count",m("span",{className:"UserCard-MonthlyDiscussionCount"},[u()("fas fa-comment")," ",n().translator.trans("foskym-sorts-for-user-directory.forum.user_card.monthly_discussions",{count:o.data.attributes.monthlyDiscussionCount})]),70),r.add("monthly-comment-count",m("span",{className:"UserCard-MonthlyCommentCount"},[u()("fas fa-comments")," ",n().translator.trans("foskym-sorts-for-user-directory.forum.user_card.monthly_comments",{count:o.data.attributes.monthlyCommentCount})]),70))})),"fof-user-directory"in flarum.extensions){var r,o=null==(r=flarum.extensions["fof-user-directory"])?void 0:r.UserDirectoryState,t=o.prototype.sortMap();(0,s.override)(o.prototype,"loadResults",(function(r,o){var e=this.params.sort||"default";if(e!==n().forum.attribute("userDirectoryDefaultSort")&&!(e in t)){var s=this.requestParams();return s.page={offset:o},s.include=s.include.join(","),this.app.store.find("users",s)}return r(o)})),(0,s.override)(o.prototype,"sortMap",(function(r){var o=r();return function(r,o){void 0===o&&(o=!1);var t={core:[{key:"foskym-sorts-for-user-directory.sort_by_monthly_posts",map:{most_monthly_discussions:"-monthly_discussion_count",most_monthly_comments:"-monthly_comment_count"}},{key:"foskym-sorts-for-user-directory.sort_by_groups_count",map:{most_groups_count:"-groups_count"}},{key:"foskym-sorts-for-user-directory.sort_by_recently_seen",map:{recently_seen:"-last_seen_at",least_recently_seen:"last_seen_at"}},{key:"foskym-sorts-for-user-directory.sort_by_comments",map:{most_comments:"-comment_count",least_comments:"comment_count"}}],"flarum-nicknames":[{key:"foskym-sorts-for-user-directory.sort_by_nickname",map:{nickname_az:"nickname",nickname_za:"-nickname"}}],"antoinefr-money":[{key:"foskym-sorts-for-user-directory.sort_by_money",map:{most_money:"-money",least_money:"money"}}],"clarkwinkelmann-likes-received":[{key:"foskym-sorts-for-user-directory.sort_by_likes_received",map:{most_likes_received:"-clarkwinkelmann_likes_received_count",least_likes_received:"clarkwinkelmann_likes_received_count"}}],"ziiven-daily-check-in":[{key:"foskym-sorts-for-user-directory.sort_by_ziven_checkin",map:{recently_checkin:"-last_checkin_time",most_total_checkin:"-total_checkin_count",most_total_continuous_checkin:"-total_continuous_checkin_count"}}],"xypp-invite-user":[{key:"foskym-sorts-for-user-directory.sort_by_invited_user",map:{most_invited_user:"-invited_user"}}],"v17development-user-badges":[{key:"foskym-sorts-for-user-directory.sort_by_badges_count",map:{most_badges_count:"-badges_count"}}]};for(var n in t)for(var s,a=y(t[n]);!(s=a()).done;){var i=s.value;if(("core"===n||!(n in flarum.extensions))&&(o?e().data.settings[i.key]:e().forum.attribute(i.key)))for(var m in i.map)r[m]=i.map[m]}return r}(o)}))}}))})(),module.exports={}})();
//# sourceMappingURL=forum.js.map